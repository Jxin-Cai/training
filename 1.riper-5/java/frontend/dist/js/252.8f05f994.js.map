{"version":3,"file":"js/252.8f05f994.js","mappings":"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","sources":["webpack://cms-frontend/./src/views/admin/CategoryManage.vue","webpack://cms-frontend/./src/views/admin/CategoryManage.vue?cdc3","webpack://cms-frontend/./src/api/category.js"],"sourcesContent":["<template>\n  <div class=\"category-manage-container\">\n    <el-container>\n      <el-header class=\"header\">\n        <h1>分类管理</h1>\n        <div>\n          <el-button @click=\"goToFrontend\">返回前台</el-button>\n          <el-button type=\"primary\" @click=\"goToContentManage\">内容管理</el-button>\n        </div>\n      </el-header>\n      <el-main>\n        <div class=\"toolbar\">\n          <el-button type=\"primary\" @click=\"handleAdd\">新增分类</el-button>\n        </div>\n        \n        <el-table :data=\"categories\" border stripe>\n          <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n          <el-table-column prop=\"name\" label=\"分类名称\" />\n          <el-table-column prop=\"description\" label=\"描述\" />\n          <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\">\n            <template #default=\"{ row }\">\n              {{ formatTime(row.createTime) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"180\">\n            <template #default=\"{ row }\">\n              <el-button size=\"small\" @click=\"handleEdit(row)\">编辑</el-button>\n              <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 新增/编辑对话框 -->\n        <el-dialog \n          v-model=\"dialogVisible\" \n          :title=\"dialogTitle\"\n          width=\"500px\"\n        >\n          <el-form :model=\"form\" label-width=\"100px\">\n            <el-form-item label=\"分类名称\" required>\n              <el-input v-model=\"form.name\" placeholder=\"请输入分类名称\" />\n            </el-form-item>\n            <el-form-item label=\"描述\">\n              <el-input \n                v-model=\"form.description\" \n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"请输入分类描述\"\n              />\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\n          </template>\n        </el-dialog>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { \n  getCategories, \n  createCategory, \n  updateCategory, \n  deleteCategory \n} from '@/api/category'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nexport default {\n  name: 'CategoryManage',\n  setup() {\n    const router = useRouter()\n    const categories = ref([])\n    const dialogVisible = ref(false)\n    const dialogTitle = ref('')\n    const form = ref({\n      id: null,\n      name: '',\n      description: ''\n    })\n\n    // 加载分类列表\n    const loadCategories = async () => {\n      try {\n        categories.value = await getCategories()\n      } catch (error) {\n        console.error('加载分类失败:', error)\n      }\n    }\n\n    // 新增分类\n    const handleAdd = () => {\n      dialogTitle.value = '新增分类'\n      form.value = {\n        id: null,\n        name: '',\n        description: ''\n      }\n      dialogVisible.value = true\n    }\n\n    // 编辑分类\n    const handleEdit = (row) => {\n      dialogTitle.value = '编辑分类'\n      form.value = {\n        id: row.id,\n        name: row.name,\n        description: row.description\n      }\n      dialogVisible.value = true\n    }\n\n    // 删除分类\n    const handleDelete = async (row) => {\n      try {\n        await ElMessageBox.confirm(\n          '确定要删除该分类吗？',\n          '提示',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n        await deleteCategory(row.id)\n        ElMessage.success('删除成功')\n        await loadCategories()\n      } catch (error) {\n        if (error !== 'cancel') {\n          ElMessage.error(error.response?.status === 409 ? '该分类下存在内容，无法删除' : '删除失败')\n        }\n      }\n    }\n\n    // 提交表单\n    const handleSubmit = async () => {\n      if (!form.value.name || !form.value.name.trim()) {\n        ElMessage.error('请输入分类名称')\n        return\n      }\n\n      try {\n        if (form.value.id) {\n          await updateCategory(form.value.id, form.value)\n          ElMessage.success('更新成功')\n        } else {\n          await createCategory(form.value)\n          ElMessage.success('创建成功')\n        }\n        dialogVisible.value = false\n        await loadCategories()\n      } catch (error) {\n        ElMessage.error('操作失败')\n      }\n    }\n\n    // 跳转到内容管理\n    const goToContentManage = () => {\n      router.push({ name: 'ContentManage' })\n    }\n\n    // 返回前台\n    const goToFrontend = () => {\n      router.push({ name: 'ContentList' })\n    }\n\n    // 格式化时间\n    const formatTime = (time) => {\n      if (!time) return ''\n      const date = new Date(time)\n      return date.toLocaleString('zh-CN')\n    }\n\n    onMounted(() => {\n      loadCategories()\n    })\n\n    return {\n      categories,\n      dialogVisible,\n      dialogTitle,\n      form,\n      handleAdd,\n      handleEdit,\n      handleDelete,\n      handleSubmit,\n      goToContentManage,\n      goToFrontend,\n      formatTime\n    }\n  }\n}\n</script>\n\n<style scoped>\n.category-manage-container {\n  min-height: 100vh;\n  background: #f5f7fa;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: white;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  padding: 0 40px;\n}\n\n.header h1 {\n  margin: 0;\n  font-size: 24px;\n  color: #303133;\n}\n\n.toolbar {\n  margin-bottom: 20px;\n}\n</style>\n","import { render } from \"./CategoryManage.vue?vue&type=template&id=4d1224e0&scoped=true\"\nimport script from \"./CategoryManage.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryManage.vue?vue&type=script&lang=js\"\n\nimport \"./CategoryManage.vue?vue&type=style&index=0&id=4d1224e0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d1224e0\"]])\n\nexport default __exports__","import request from '@/utils/request'\n\n/**\n * 查询所有分类\n */\nexport function getCategories() {\n  return request({\n    url: '/categories',\n    method: 'get'\n  })\n}\n\n/**\n * 查询单个分类\n */\nexport function getCategory(id) {\n  return request({\n    url: `/categories/${id}`,\n    method: 'get'\n  })\n}\n\n/**\n * 创建分类\n */\nexport function createCategory(data) {\n  return request({\n    url: '/categories',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 更新分类\n */\nexport function updateCategory(id, data) {\n  return request({\n    url: `/categories/${id}`,\n    method: 'put',\n    data\n  })\n}\n\n/**\n * 删除分类\n */\nexport function deleteCategory(id) {\n  return request({\n    url: `/categories/${id}`,\n    method: 'delete'\n  })\n}\n"],"names":["class","goToFrontend","type","goToContentManage","handleAdd","data","categories","border","stripe","prop","label","width","default","row","formatTime","createTime","size","handleEdit","handleDelete","dialogVisible","title","dialogTitle","footer","handleSubmit","model","form","required","name","placeholder","description","rows","setup","router","id","loadCategories","async","value","error","console","confirm","confirmButtonText","cancelButtonText","success","response","status","trim","push","time","date","Date","toLocaleString","__exports__","render","getCategories","url","method","createCategory","updateCategory","deleteCategory"],"sourceRoot":""}